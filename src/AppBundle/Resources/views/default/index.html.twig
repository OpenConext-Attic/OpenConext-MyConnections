{% extends 'AppBundle::base.html.twig' %}

{% block body %}
<div class="content">
    <div class="content-title row">
        <h2>My Connections</h2>
    </div>
    {% if connections|length > 0 %}
        {%  for connection in connections %}
            {# @var connection \AppBundle\DTO\Connection #}
            <div class="connected-connections border-top row {{ connection.machine_name }}">
                <div class="connection-logo">
                    <div class="logo-container">
                        <img src="{{ connection.logo }}"/>
                    </div>
                </div>
                <div class="connection-description">
                    <div class="connection-created">
                        <span class="established_at header">Connection made</span><br/>
                        {{ connection.established_at|date("m/d/Y") }}
                    </div>
                    <div class="connection-info">
                        <p>
                            <span class="eduPPN header">Name</span><br/>
                            {{ connection.username }}
                        </p>
                        <p>
                            <span class="cuid header">{{ connection.display_name }}</span><br/>
                            {{ connection.connection_id }}
                        </p>
                    </div>
                    <div class="connection-status">
                        <p>
                            <span class="status header">Status</span><br/>
                            Connected
                        </p>
                    </div>
                </div>
                <div class="connection-button">
                    <a class="btn connect disconnect" href="{{ url(connection.route_disconnect) }}">Disconnect</a>
                </div>
            </div>
        {% endfor %}
    {% else %}
        <div class="my-connections border-top row">
            <h3>It seems you have no connections yet, why should you make some?</h3>
            <p>Because when you do, the attribute authority is used by OpenConext to enrich your existing attributes with connection.
                Services connected to OpenConext will be able to use your connections.</p>
        </div>
    {% endif %}
    {% if available_connections|length > 0 %}
        <div class="content-subtitle border-top row">
            <h3>Available connections</h3>
        </div>
        {% for service in available_connections %}
            {# @var service \AppBundle\DTO\Connection #}
            <div class="available-connections border-top row {{ service.machine_name }}">
                <div class="connection-logo">
                    <div class="logo-container">
                        <img src="{{ service.logo }}"/>
                    </div>
                </div>
                <div class="connection-description">
                    <p>{{ service.description }}</p>
                </div>
                <div class="connection-button">
                    <a class="btn connect" href="{{ url(service.route_connect) }}">Connect</a>
                </div>
            </div>
        {% endfor %}
    {% endif %}
    <div class="content-footer border-top row">
        <h3>Missing connections?</h3>
        <p><a href="#">Send us a request</a></p>
    </div>
</div>
{% endblock %}
